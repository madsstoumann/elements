<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Loading Videos</title>

	<style>
		body { font-family: system-ui, ui-sans-serif, sans-serif; }
		[data-code] {
			background-color: #1e1e1e;
 
    color: #b5cea8;
    flex: 0 0 100%;
    font-family: ui-monospace, monospace;
    font-size: small;
    min-height: 4rem;
    padding: 0.5rem;
    resize: none;
    tab-size: 2;
    width: 100%;
    word-break: break-all;
		}

		.code--boolean { color: deepskyblue; }
.code--key { color: lightblue; }
.code--null { color: lightcoral; }
.code--number { color: lightgreen; }
.code--string {	color: lightsalmon; white-space: initial;}

	</style>
</head>
<body>
	<h1>Loading videos</h1>
	It's simple enough to include a video on a webpage, but as soon as you have multiple videos — maybe even <em>both</em> locally hosted videos and videos from external vendors like YouTube — things get complicated.
	<p>Some videos could be small, auto-playing, “gif-like” videos — others will require a manual “click to play”.</p>
No matter <em>which</em> type of video, it needs to pause/stop when:

<ol>
	<li>You click on *another* video, or when another video is activated automatically as it enters the viewport (with `autoplay` enabled)</li>
	<li>The video leaves the viewport (detect using `IntersectionObserver`)</li>
	<li>You go to another browser-tab (detect using `onVisibilityChange`)</li>
</ol>


	<div data-code>
<pre>
	tmplVideo(video) {
		return `
		&lt;div data-video="${video.autoplay ? 'autoplay':''}"&gt;
			&lt;video
				${video.controls ? ` controls`:''}
				${video.fullscreen ? ` data-hide-fullscreen`:''}
				${video.loop ? ` loop`:''}
				${video.mute ? ` muted`:''}
				${video.playsinline ? ` playsinline`:''}
				preload="${video.preload ? 'auto':'none'}">
				&lt;source src="${video.src}" type="video/mp4"&gt;
			&lt;/video&gt;
			${video.poster ? `
				&lt;img data-video-poster src="${video.poster}" alt="${video.title}" /&gt;
				&lt;button data-video-play type="button" aria-label="PLAY TEXT"&gt;
					PLAY-ICON
				&lt;/button&gt;`:''}
		&lt;/div&gt;`
	}
</pre>

</div>

<h2>Data-model</h2>
</body>
</html>