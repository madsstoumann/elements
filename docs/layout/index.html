<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>Layout</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<link href="../assets/css/demo.css" rel="stylesheet">
	<link href="../assets/css/animations.css" rel="stylesheet">
	<link href="../assets/css/c-ico.css" rel="stylesheet">
	<link href="../assets/css/c-lay.css" rel="stylesheet">
	<link href="../assets/css/c-typ.css" rel="stylesheet">

	<style>
		/* Demo Styles */
		body {
			margin: 0;
		}
		.item {
			background-color: deepskyblue;
			box-shadow: 0px 10px 5px -5px rgba(0, 0, 0, 0.15);
			border-radius: 0px;
			color: #FFF;
			font-family: sans-serif;
			font-size: 2rem;
			height: 300px;
			line-height: 1.2;
			padding: .75rem 0 0 1rem;
		}
	</style>
</head>
<body class="typo typo--dynamic">

	<!--
		stack - no gap between rows:
		--lay-item-mb: 0px;
		--lay-inner-pb: var(--lay-gap);

	-->
<main class="c-lay__wrapper">

	<section class="c-lay c-lay--theme02 c-lay--full c-lay--desc-s"
		data-auto-play=":true"
		data-section-type="slider">
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">full-width &mdash; slide 1</div></div>
				<div class="c-lay__item"><div class="item">full-width &mdash; slide 2</div></div>
				<div class="c-lay__item"><div class="item">full-width &mdash; slide 3</div></div>
				<div class="c-lay__item"><div class="item">full-width &mdash; slide 4</div></div>
				<div class="c-lay__item"><div class="item">full-width &mdash; slide 5</div></div>
			</div>
		</div>
		<header>
			<h2 class="c-lay__headline c-headline--h1">Above: Full-width hero</h2>
			<div class="c-lay__description">
				<p>
					The slider above will change slide automatically if JavaScript is loaded, as the <code>data-auto-play</code>-attribute is set to <code>:true</code>.
				</p>
			</div>
		</header>
	</section>

	<section class="c-lay c-lay--pt c-lay--desc-m"
		data-section-type="slider">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Slider with preview of next item and a headline, that spans multiple lines.</h2>
			<div class="c-lay__description">
				<p>
					Shows a preview of the next item in the section. A scrollbar will ber shown on desktop devices, if JavaScript somehow fails.
					This descriptive text has the modifier <code>c-lay__desc--m</code>, setting the max-width to 75%.
				</p>
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
				<div class="c-lay__item"><div class="item">9</div></div>
				<div class="c-lay__item"><div class="item">10</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--pt c-lay--head-m c-lay--desc-s"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="33:33:33"
		data-section-type="slider">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Slider with no preview and multiple items per “page”</h2>
			<div class="c-lay__description">
				The headline use the <code>c-lay__head--m</code>-modidier to set max-width to 75%. Visible navigation arrows will be shown on all screensizes, since no preview indicates swipeability.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme01 c-lay--w-xl c-lay--desc-m c-lay--head-m c-lay--mt"
		data-layout="50:50"
		data-layout-tablet="33:66"
		data-layout-desktop="25:25:25:25"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Grouped stacked sections with layout changes</h2>
			<div class="c-lay__description">
				The content in the top section is stacked, and will will change from <code>50:50</code> to <code>33:66</code> to <code>25:25:25:25</code>.
				As the section has a custom background-color, the modifier <code>c-lay-pt</code> has been added, to add padding to the top.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">50% <br/> 33% <br/> 25%</div></div>
				<div class="c-lay__item"><div class="item">50% <br/> 66% <br/> 25%</div></div>
				<div class="c-lay__item"><div class="item">50% <br/> 33% <br/> 25%</div></div>
				<div class="c-lay__item"><div class="item">50% <br/> 66% <br/> 25%</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme01 c-lay--w-xl"
		data-layout="50:50"
		data-layout-tablet="33:33:33"
		data-layout-desktop="25:50:25"
		data-section-type="stack">
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">50% <br/> 33% <br/> 25%</div></div>
				<div class="c-lay__item"><div class="item">50% <br/> 33% <br/> 50%</div></div>
				<div class="c-lay__item"><div class="item">50% <br/> 33% <br/> 25%</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme01 c-lay--w-xl"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="75:25"
		data-section-type="stack">
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">100% <br/> 50% <br/> 75%</div></div>
				<div class="c-lay__item"><div class="item">100% <br/> 50% <br/> 25%</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme02 c-lay--desc-s c-lay--head-m"
		data-animation="a-fade-in-bottom"
		data-animation-target=".c-lay__item"
		data-layout="50:50"
		data-layout-tablet="25:25:25:25"
		data-layout-desktop="25:25:25:25"
		data-item-type="card"
		data-section-type="slider"
		data-preview>
		<header>
			<h2 class="c-lay__headline c-headline--h1">Grouped slider sections with preview</h2>
			<div class="c-lay__description">
				These sliders will show a preview of the next item. preview width is specified in the CSS Custom prop <em>--lay-item-preview</em>
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__toggle-layout" data-toggle-layout>Show all</div>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme02 c-lay--desc-m c-lay--head-m c-lay--pt"
		data-animation="a-fade-in-bottom"
		data-animation-target=".c-lay__item"
		data-layout="100"
		data-layout-tablet="33:33:33"
		data-layout-desktop="25:25:25:25"
		data-section-type="slider"
		data-preview>
			<h3 class="c-lay__headline c-headline--h4">Family-friendly releases</h3>
			<div class="c-lay__toggle-layout" data-toggle-layout>Show all</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme02 c-lay--desc-m c-lay--head-m c-lay--pt"
		data-animation="a-fade-in-bottom"
		data-animation-target=".c-lay__item"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="33:33:33"
		data-section-type="slider"
		data-preview>
		<header class="c-lay__header--line">
			<h3 class="c-lay__headline c-headline--h4">Science Fiction and Fantasy releases</h3>
			<div class="c-lay__toggle-layout" data-toggle-layout>Show all</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme02 c-lay--mb c-lay--desc-m c-lay--head-m c-lay--pt"
		data-animation="a-fade-in-bottom"
		data-animation-target=".c-lay__item"
		data-layout="100"
		data-layout-tablet="100"
		data-layout-desktop="100"
		data-section-type="slider"
		data-preview>
			<h3 class="c-lay__headline c-headline--h4">Star Wars releases</h3>
			<div class="c-lay__toggle-layout" data-toggle-layout>Show all</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme01 c-lay--w-m c-lay--pt c-lay--head-m c-lay--desc-m"
		data-animation="a-fade-in-bottom"
		data-animation-target=".c-lay__item"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="25:25:25:25"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Breaker-section without content</h2>
			<div class="c-lay__description">
				A section without stacked content or slider.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--mb c-lay--head-m c-lay--pt"
		data-animation="a-fade-in-bl"
		data-align="center"
		data-section-type="slider">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Slider with preview of both previous and next items</h2>
			<div class="c-lay__description">
				The section slides in from the bottom, using the animation <code>a-fade-in-bl</code>
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
				<div class="c-lay__item"><div class="item">9</div></div>
				<div class="c-lay__item"><div class="item">10</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--theme03 c-lay--pt c-lay--mb c-lay--head-m"
		data-animation="a-fade-in-bottom"
		data-expanded="false"
		data-layout="100"
		data-layout-tablet="66:33"
		data-layout-desktop="66:33"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Section with expand and collapse functionality</h2>
			<div class="c-lay__description">
				This section will expand to reveal hidden content. The initial height is specified in modifiers <code>c-lay--exp-s</code>, <code>c-lay--exp-m</code> and <code>c-lay--exp-l</code>
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
			</div>
		</div>

		<nav class="c-lay__toggle-expand">
			<button type="button" class="c-lay__nav-btn" aria-label="Expand/Collapse" data-toggle>
				<i class="c-ico-mai c-ico--arr_dwn"></i>
			</button>
		</nav>

	</section>

	<section class="c-lay"
		
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="33:33:33"
		data-section-type="slider"
		data-loop=":true">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Slider with continuos loop</h2>
			<div class="c-lay__description">
				This slider will "start over", becuase the <code>data-loop</code>-attribute is set to <code>:true</code>
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
				<div class="c-lay__item"><div class="item">6</div></div>
				<div class="c-lay__item"><div class="item">7</div></div>
				<div class="c-lay__item"><div class="item">8</div></div>
				<div class="c-lay__item"><div class="item">9</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--head-m c-lay--mb"
		data-animation="a-fade-in-bl"
		data-nogap="column"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="50:50"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Stacked content with no gap between columns</h2>
			<div class="c-lay__description">
				The default gap between columns have been removed using <code>data-nogap="column"</code>.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--head-m c-lay--mb"
		data-animation="a-fade-in-bl"
		data-nogap="row"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="50:50"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Stacked content with no gap between rows</h2>
			<div class="c-lay__description">
				The default gap between rows have been removed using <code>data-nogap="row"</code>.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
			</div>
		</div>
	</section>

	<section class="c-lay c-lay--head-m c-lay--mb"
		data-animation="a-fade-in-bl"
		data-nogap="column row"
		data-layout="100"
		data-layout-tablet="50:50"
		data-layout-desktop="50:50"
		data-section-type="stack">
		<header>
			<h2 class="c-lay__headline c-headline--h1">Stacked content with no gap between columns <em>and</em> rows</h2>
			<div class="c-lay__description">
				The default gap between columns and rows have been removed using <code>data-nogap="column row"</code>.
			</div>
		</header>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
			</div>
		</div>
	</section>

	<!-- <section class="c-lay"
		data-align="center"
		data-items-per-page=":3"
		data-js="slider"
		dir="rtl">
		<h2 class="c-lay__headline">RTL: Preview of next and previous, 3 items per page</h2>
		<div class="c-lay__outer" data-outer>
			<div class="c-lay__inner" data-inner>
				<div class="c-lay__item"><div class="item">1</div></div>
				<div class="c-lay__item"><div class="item">2</div></div>
				<div class="c-lay__item"><div class="item">3</div></div>
				<div class="c-lay__item"><div class="item">4</div></div>
				<div class="c-lay__item"><div class="item">5</div></div>
			</div>
		</div>
	</section> -->
</main>

	<!-- <script defer src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"></script> -->
	<script type="module">
		const elements = document.querySelectorAll('[data-section-type="slider"]');
			if (elements.length) {
				import('../assets/js/slider.mjs')
				.then(module => {
					const jsClass = module.default;
					elements.forEach(element => {
						// new jsClass(element, element.dataset);
					});
				})
			}

	/* Trigger animations */
	const io = new IntersectionObserver((entries) => {	
	entries.forEach(entry => {
		if (entry.isIntersecting) {
			const section = entry.target;
			const animation = section.dataset.animation;
			const target = section.dataset.animationTarget;
			if (target) {
				const items = section.querySelectorAll(section.dataset.animationTarget);
				items.forEach(item => {
					item.classList.add(animation)
				});
				if (target === 'both') {
					section.classList.add(animation);
				}
			}
			else {
				section.classList.add(animation);
			}
			io.unobserve(entry.target);
		}
		},
		{
			threshold: [0.5]
		});
	});
	const sections = document.querySelectorAll('[data-animation]')
	sections.forEach(section => {
		io.observe(section);
	});

	/* Toggle Expand / Collapse */
	const togglers = document.querySelectorAll('[data-toggle]')
	togglers.forEach(toggle => {

		toggle.addEventListener('click', () => {
			const section = toggle.closest('.c-lay');
			const inner = section.querySelector('.c-lay__inner');
			const height = inner.scrollHeight;
			if (section) {
				const expanded = section.dataset.expanded === 'true'
				if (expanded) {
					/* TODO */
					section.style.setProperty('--lay-expand-h', `250px`);
					section.dataset.expanded = 'false';
					const rect = section.getBoundingClientRect();
					const scrollPos = (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0);
					window.setTimeout( () => {
						window.scrollTo({ top: parseInt(rect.top + scrollPos), behavior: 'smooth'});
					}, 250);
					/* TODO:update aria label/state */
					// toggle.innerText = 'Expand';
				}
				else {
					section.style.setProperty('--lay-expand-h', `${height}px`);
					/* TODO:update aria label/state */
					// toggle.innerText = toggle.dataset.toggle;
					section.dataset.expanded = 'true';
				}
				toggle.dataset.expanded = expanded ? 'false' : 'true';
				// section.dataset.expanded = expanded ? 'false' : 'true';
			}
				
		})
	});

	/* Toggle Layout */
	const togglelayout = document.querySelectorAll('[data-toggle-layout]')
	togglelayout.forEach(toggle => {
		toggle.addEventListener('click', () => {
			const section = toggle.closest('.c-lay');
			if (section.dataset.sectionType === 'slider') {
				section.dataset.sectionType = 'stack'
			}
			else if (section.dataset.sectionType === 'stack') {
				section.dataset.sectionType = 'slider'
			}
		});
	});

	/* Item Types */
	const items = document.querySelectorAll(`[data-item-type="card"] .c-lay__item`);
	items.forEach(item => {
		item.addEventListener('click', () => {
			if (item.classList.contains('c-lay__item--open')) {
				const body = document.body;
				const scrollY = body.style.top;
				body.style.position = '';
				body.style.top = '';
				window.scrollTo(0, parseInt(scrollY || '0') * -1);
				item.classList.remove('c-lay__item--open');
			} else {
				const scrollY = document.documentElement.style.getPropertyValue('--scroll-y');
				const body = document.body;
				body.style.position = 'fixed';
				body.style.top = `-${scrollY}`;
				item.classList.add('c-lay__item--open');
			}
		});
	});

	/* TODO: Wrap in debounce!!! */
	window.addEventListener('scroll', () => {
		document.documentElement.style.setProperty('--scroll-y', `${window.scrollY}px`);
	});

</script>
</body>
</html>